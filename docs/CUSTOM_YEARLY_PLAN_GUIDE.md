# 定制年卡套餐使用指南

## 📋 概述

定制年卡套餐是专为定制化客户设计的高级套餐，提供365天的专属定制化AI助手服务。

## 💰 套餐信息

| 项目 | 详情 |
|------|------|
| **套餐名称** | 定制年卡 |
| **价格** | ¥10,000.00 |
| **有效期** | 365天 |
| **服务内容** | 专属定制化AI助手服务 |
| **适用对象** | 定制化客户 |

## 🎯 使用场景

定制年卡套餐适用于以下场景：

1. **企业定制客户**
   - 需要专属AI实例
   - 自定义Dify应用配置
   - 独立知识库管理

2. **高级个人用户**
   - 长期使用需求
   - 需要定制化服务
   - 专属API配置

3. **合作伙伴**
   - 战略合作伙伴
   - 渠道合作伙伴
   - 技术合作伙伴

## 📝 操作流程

### 1. 生成激活码

1. **登录管理后台**
   - 访问: `https://your-domain.com/admin`
   - 使用管理员账号登录

2. **进入激活码管理**
   - 点击左侧菜单 "激活码管理"
   - 进入激活码管理页面

3. **选择定制年卡套餐**
   - 在"生成激活码"区域
   - 套餐下拉框选择 "定制年卡 - ¥10000.00"
   - 输入生成数量（建议1-10个）
   - 点击"生成激活码"

4. **获取激活码**
   - 生成成功后会显示激活码列表
   - 点击"复制"按钮复制激活码
   - 或导出Excel保存激活码

### 2. 配置定制化AI

在生成激活码后，需要为客户配置定制化AI实例：

1. **进入定制化AI管理**
   - 点击左侧菜单 "定制化AI管理"

2. **添加配置**
   - 点击"添加配置"按钮
   - 填写以下信息：
     - **客户手机号**: 客户注册时使用的手机号
     - **Dify应用ID**: 客户专属的Dify应用ID
     - **Dify API密钥**: 对应的API密钥
     - **Dify API URL**: Dify服务地址
     - **知识库ID**: (可选) 专属知识库ID
     - **系统提示词**: (可选) 定制化提示词

3. **保存配置**
   - 点击"创建"按钮
   - 系统会自动关联客户手机号和UUID

### 3. 分发激活码

1. **通过邮件/微信发送**
   - 将激活码发送给客户
   - 附上激活说明

2. **激活说明模板**
   ```
   尊敬的客户，您好！

   感谢您购买定制年卡套餐。以下是您的激活码：

   激活码: XXXXXXXX
   有效期: 365天
   价值: ¥10,000.00

   激活步骤：
   1. 登录系统: https://your-domain.com
   2. 进入个人中心
   3. 点击"激活码"标签
   4. 输入激活码并点击"激活"

   激活后，您将享受专属定制化AI助手服务。

   如有任何问题，请联系客服。
   ```

### 4. 客户激活流程

客户收到激活码后的操作：

1. **登录系统**
   - 使用手机号登录
   - 进入个人中心

2. **激活套餐**
   - 点击"激活码"标签
   - 输入激活码
   - 点击"激活"按钮

3. **验证激活**
   - 激活成功后，订阅状态更新为"年套餐"
   - 到期时间显示为365天后
   - 可以开始使用定制化AI服务

## 🔍 管理和监控

### 查看激活码状态

在"激活码管理"页面可以查看：

- **激活码列表**: 所有生成的激活码
- **使用状态**: 已使用/未使用
- **激活时间**: 激活的具体时间
- **使用用户**: 激活该码的用户手机号
- **套餐信息**: 关联的套餐类型和金额

### 查看定制化配置

在"定制化AI管理"页面可以查看：

- **客户手机号**: 客户的联系方式
- **客户昵称**: 客户的显示名称
- **应用ID**: Dify应用ID
- **API URL**: Dify服务地址
- **状态**: 启用/禁用
- **创建时间**: 配置创建时间

### 导出数据

1. **导出激活码Excel**
   - 在激活码列表页面
   - 点击"📥 导出Excel"按钮
   - 下载包含所有激活码信息的Excel文件

2. **Excel内容包括**
   - 激活码
   - 套餐类型
   - 套餐金额
   - 使用状态
   - 激活用户
   - 激活时间
   - 到期时间

## 💡 最佳实践

### 1. 激活码管理

- ✅ **批量生成**: 一次生成多个激活码备用
- ✅ **及时记录**: 记录激活码分发对象和时间
- ✅ **定期检查**: 检查激活码使用情况
- ✅ **安全保管**: 妥善保管未使用的激活码

### 2. 定制化配置

- ✅ **提前配置**: 在分发激活码前配置好定制化AI
- ✅ **测试验证**: 配置后进行测试确保正常工作
- ✅ **文档记录**: 记录每个客户的配置信息
- ✅ **定期维护**: 定期检查配置状态和服务可用性

### 3. 客户服务

- ✅ **清晰说明**: 提供详细的激活和使用说明
- ✅ **及时响应**: 快速响应客户的激活问题
- ✅ **主动跟进**: 激活后主动询问使用体验
- ✅ **续费提醒**: 到期前提醒客户续费

## 🔧 技术细节

### 数据库结构

**plans 表**
```sql
name: '定制年卡'
price: 1000000  -- 10000元，单位：分
duration_days: 365
description: '定制年卡，享受365天专属定制化AI助手服务'
is_active: true
```

**custom_ai_configs 表**
```sql
customer_id: UUID  -- 客户UUID（通过手机号查询）
dify_app_id: VARCHAR(100)  -- Dify应用ID
dify_api_key: VARCHAR(255)  -- Dify API密钥
dify_api_url: VARCHAR(500)  -- Dify API地址
knowledge_base_id: VARCHAR(100)  -- 知识库ID（可选）
system_prompt: TEXT  -- 系统提示词（可选）
is_active: BOOLEAN  -- 是否启用
```

### API端点

- **生成激活码**: `POST /api/admin/generate-codes`
- **激活码列表**: `GET /api/admin/activation-codes`
- **定制化配置**: `GET/POST/PUT/DELETE /api/admin/custom-ai-configs`

## ❓ 常见问题

### Q1: 定制年卡和普通年卡有什么区别？

**A**: 
- **普通年卡**: ¥3,999，使用公共AI实例
- **定制年卡**: ¥10,000，使用专属定制化AI实例，可配置独立的Dify应用、知识库和提示词

### Q2: 如何修改客户的定制化配置？

**A**: 
1. 进入"定制化AI管理"页面
2. 找到对应客户的配置
3. 点击"编辑"按钮
4. 修改配置信息
5. 点击"更新"保存

### Q3: 激活码可以重复使用吗？

**A**: 不可以。每个激活码只能使用一次，激活后状态变为"已使用"。

### Q4: 如何取消已激活的激活码？

**A**: 
1. 在激活码列表中找到对应的激活码
2. 点击"取消激活"按钮
3. 确认操作
4. 激活码状态恢复为"未使用"，用户订阅状态也会相应调整

### Q5: 客户到期后如何续费？

**A**: 
1. 生成新的定制年卡激活码
2. 发送给客户
3. 客户在个人中心激活新的激活码
4. 订阅时间自动延长365天

## 📞 技术支持

如有任何问题，请联系技术支持团队。

---

**文档版本**: v1.0  
**最后更新**: 2025-11-08  
**维护者**: 开发团队

